window.fathom=function(){function t(){window.fathom.trackPageview()}var e=document.currentScript||document.querySelector('script[src*="script.js"][site]')||document.querySelector("script[data-site]")||document.querySelector("script[site]"),a=e.getAttribute("data-site")||e.getAttribute("site"),r=!1,i=!0,n=!0,o=[],c=[];function s(){var e;void 0!==history&&(e=history.pushState,history.pushState=function(){var t=e.apply(history,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchangefathom")),t},window.addEventListener("popstate",function(){window.dispatchEvent(new Event("locationchangefathom"))}),window.addEventListener("locationchangefathom",t))}function d(){window.addEventListener("hashchange",t)}if("true"==(e.getAttribute("data-honor-dnt")||e.getAttribute("honor-dnt"))&&(r="doNotTrack"in navigator&&"1"===navigator.doNotTrack),"false"==(e.getAttribute("data-auto")||e.getAttribute("auto"))&&(i=!1),"false"==(e.getAttribute("data-canonical")||e.getAttribute("canonical"))&&(n=!1),(e.getAttribute("data-excluded-domains")||e.getAttribute("excluded-domains"))&&(o=(e.getAttribute("data-excluded-domains")||e.getAttribute("excluded-domains")).split(",")),e.getAttribute("data-included-domains")||e.getAttribute("included-domains")?c=(e.getAttribute("data-included-domains")||e.getAttribute("included-domains")).split(","):(e.getAttribute("data-allowed-domains")||e.getAttribute("allowed-domains"))&&(c=(e.getAttribute("data-allowed-domains")||e.getAttribute("allowed-domains")).split(",")),e.getAttribute("data-spa")||e.getAttribute("spa"))switch(e.getAttribute("data-spa")||e.getAttribute("spa")){case"history":s();break;case"hash":d();break;case"auto":(void 0!==history?s:d)()}var u,l="https://cdn.usefathom.com/";function h(t){return t.cid=Math.floor(1e8*Math.random())+1,"?"+Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function f(){for(var t,e={},a=window.location.search.substring(window.location.search.indexOf("?")+1).split("&"),r=0;r<a.length;r++)a[r]&&-1<["keyword","q","ref","s","utm_campaign","utm_content","utm_medium","utm_source","utm_term","action","name","pagename","tab","via",].indexOf(decodeURIComponent((t=a[r].split("="))[0]))&&(e[decodeURIComponent(t[0])]=decodeURIComponent(t[1]));return e}function m(){var t=!1;try{t=window.localStorage&&window.localStorage.getItem("blockFathomTracking")}catch(e){}var a="visibilityState"in document&&"prerender"===document.visibilityState,i=-1<o.indexOf(window.location.hostname),n=!(0<c.length)||-1<c.indexOf(window.location.hostname);if(!t&&!a&&!r&&!i&&n)return!0}function g(t){var e,a=window.location;return void 0===t.url?n&&document.querySelector('link[rel="canonical"][href]')&&((e=document.createElement("a")).href=document.querySelector('link[rel="canonical"][href]').href,a=e):(a=document.createElement("a")).href=t.url,a}return 0>e.src.indexOf("cdn.usefathom.com")&&((u=document.createElement("a")).href=e.src,l="https://"+u.hostname+"/"),i&&setTimeout(function(){window.fathom.trackPageview()}),{siteId:a,send:function(t){var e;m()&&((e=document.createElement("img")).setAttribute("alt",""),e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.src=l+h(t),e.addEventListener("load",function(){e.parentNode.removeChild(e)}),e.addEventListener("error",function(){e.parentNode.removeChild(e)}),document.body.appendChild(e))},beacon:function(t){m()&&navigator.sendBeacon(l+h(t))},trackPageview:function(t){var a,r,i=g(t=void 0===t?{}:t);""!==i.host&&(a=i.protocol+"//"+i.hostname,r=i.pathname||"/","hash"==e.getAttribute("data-spa")&&(r+=i.hash),this.send({h:a,p:r,r:t.referrer||(0>document.referrer.indexOf(a)?document.referrer:""),sid:this.siteId,qs:JSON.stringify(f())}))},trackGoal:function(t,e){var a=g({}),r=a.protocol+"//"+a.hostname;this.beacon({gcode:t,gval:e,qs:JSON.stringify(f()),p:a.pathname||"/",h:r,r:0>document.referrer.indexOf(r)?document.referrer:"",sid:this.siteId})},trackEvent:function(t,e={}){var a=g({}),r=a.protocol+"//"+a.hostname;this.beacon({name:t,payload:JSON.stringify(e),p:a.pathname||"/",h:r,r:0>document.referrer.indexOf(r)?document.referrer:"",sid:this.siteId,qs:JSON.stringify(f())})},setSite(t){this.siteId=t},blockTrackingForMe:function(){window.localStorage?(window.localStorage.setItem("blockFathomTracking",!0),alert("You have blocked Fathom for yourself on this website.")):alert("Your browser doesn't support localStorage.")},enableTrackingForMe:function(){window.localStorage&&(window.localStorage.removeItem("blockFathomTracking"),alert("Fathom has been enabled for this website."))},isTrackingEnabled:function(){return!0===m()}}}();